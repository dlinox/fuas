import{_ as E,a as N,b as j}from"./position.services-X5Unhxl6.js";import{d as C,b as m,r as a,o as D,c as P,w as o,a as e,u as g,g as f,f as q,t as z,i as G,j as H}from"./index-ooGDqISt.js";import{r as F}from"./ruleUtils-DaB-ACZt.js";import{_ as L}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-DuPVaZJL.js";const S={name:[F],description:[]},M=()=>({id:null,name:"",description:null,status:!0}),B=C({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(w,{emit:u}){const r=u,d=w,p=m(!1),l=m(!1),t=m(null),i=m({...M(),...d.formState}),b=async()=>{const{valid:v}=await t.value.validate();if(!v)return;p.value=!0,await E(i.value)&&(r("onSuccess"),l.value=!1),p.value=!1};return(v,n)=>{const y=a("v-text-field"),c=a("v-col"),s=a("v-textarea"),x=a("v-switch"),T=a("v-row"),U=a("v-card-item"),V=a("v-btn"),k=a("v-spacer"),$=a("v-card-actions"),I=a("v-card"),O=a("v-form"),R=a("v-dialog");return D(),P(R,{"max-width":"700",modelValue:l.value,"onUpdate:modelValue":n[4]||(n[4]=_=>l.value=_),activator:"parent"},{default:o(()=>[e(O,{ref_key:"formRef",ref:t,onSubmit:q(b,["prevent"])},{default:o(()=>[e(I,{title:i.value.id?"Editar Registro":"Nuevo Registro"},{default:o(()=>[e(U,{class:"border-t border-b"},{default:o(()=>[e(T,null,{default:o(()=>[e(c,{cols:"12"},{default:o(()=>[e(y,{modelValue:i.value.name,"onUpdate:modelValue":n[0]||(n[0]=_=>i.value.name=_),label:"Nombre",rules:g(S).name},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:o(()=>[e(s,{modelValue:i.value.description,"onUpdate:modelValue":n[1]||(n[1]=_=>i.value.description=_),label:"Descripción",rules:g(S).description,rows:"2"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:o(()=>[e(x,{label:i.value.status?"Habilitado":"Deshabilitado",modelValue:i.value.status,"onUpdate:modelValue":n[2]||(n[2]=_=>i.value.status=_),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),e($,null,{default:o(()=>[e(V,{type:"button",variant:"text",color:"secondary",onClick:n[3]||(n[3]=_=>l.value=!1)},{default:o(()=>n[5]||(n[5]=[f(" Cancelar ")])),_:1}),e(k),e(V,{text:"Guardar",color:"primary",type:"submit",loading:p.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),A=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Nombre",key:"name",value:"name"},{title:"Descripción",key:"description",value:"description"},{title:"Estado",key:"status",value:"status"}],J=C({__name:"DataTable",props:{options:{},items:{},loading:{type:Boolean},total:{}},emits:["onUpdateTable"],setup(w,{emit:u}){const r=u,d=m(!1),p=async l=>{d.value=!0,await N(l)&&r("onUpdateTable"),d.value=!1};return(l,t)=>{const i=a("v-icon"),b=a("v-list-item"),v=a("v-list"),n=a("v-menu"),y=a("v-btn"),c=a("v-data-table-server");return D(),P(c,{"items-per-page":l.options.itemsPerPage,"onUpdate:itemsPerPage":[t[1]||(t[1]=s=>l.options.itemsPerPage=s),t[4]||(t[4]=s=>r("onUpdateTable"))],"sort-by":l.options.sortBy,"onUpdate:sortBy":[t[2]||(t[2]=s=>l.options.sortBy=s),t[5]||(t[5]=s=>r("onUpdateTable"))],page:l.options.page,"onUpdate:page":[t[3]||(t[3]=s=>l.options.page=s),t[6]||(t[6]=s=>r("onUpdateTable"))],headers:g(A),items:l.items,"items-length":l.total,loading:d.value,"item-value":"id","multi-sort":""},{"item.actions":o(({item:s})=>[e(y,{icon:"",density:"compact",variant:"text"},{default:o(()=>[e(i,null,{default:o(()=>t[7]||(t[7]=[f("mdi-dots-vertical")])),_:1}),e(n,{activator:"parent"},{default:o(()=>[e(v,{density:"compact"},{default:o(()=>[e(b,{key:"edit",value:"edit","append-icon":"mdi-pencil",class:"text-subtitle-2"},{append:o(()=>[e(i,{size:"small"},{default:o(()=>t[8]||(t[8]=[f(" mdi-pencil ")])),_:1})]),default:o(()=>[t[9]||(t[9]=f(" Editar ")),e(g(B),{formState:s,onOnSuccess:t[0]||(t[0]=x=>r("onUpdateTable"))},null,8,["formState"])]),_:2},1024),e(b,{key:"delete",value:"delete",class:"text-red text-subtitle-2"},{append:o(()=>[e(i,{size:"small",color:"red"},{default:o(()=>t[10]||(t[10]=[f(" mdi-delete ")])),_:1})]),default:o(()=>[t[11]||(t[11]=f(" Eliminar ")),e(L,{title:"Eliminar",message:"¿Está seguro de eliminar este registro?","text-cancel":"No","text-confirm":"Confirmar",loading:d.value,onOnConfirm:()=>p(s.id)},null,8,["loading","onOnConfirm"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.status":o(({item:s})=>[e(y,{color:s.status?"blue":"error","text-color":"white",density:"compact",variant:"tonal"},{default:o(()=>[f(z(s.status?"Habilitado":"Deshabilitado"),1)]),_:2},1032,["color"])]),_:1},8,["items-per-page","sort-by","page","headers","items","items-length","loading"])}}});function K(w,u){let r;return function(...d){r&&clearTimeout(r),r=setTimeout(()=>{w.apply(this,d)},u)}}const Z=C({__name:"index",setup(w){const u=m(!1),r=m(!1),d=m([]),p=m(0),l=m({itemsPerPage:10,sortBy:[],page:1,search:"",filters:{}}),t=K(()=>{i()},400),i=async()=>{r.value=!0;const v=await j(l.value);d.value=v.data,p.value=v.total,r.value=!1},b=async()=>{u.value=!0,await i(),u.value=!1};return b(),(v,n)=>{const y=a("v-text-field"),c=a("v-col"),s=a("v-btn"),x=a("v-row"),T=a("v-card-item"),U=a("v-card"),V=G("tooltip");return D(),P(U,{title:"Cargos",subtitle:"Gestion de Cargos de Trabajo",disabled:u.value},{default:o(()=>[e(T,{class:"border-t border-b"},{default:o(()=>[e(x,{class:"d-flex justify-space-between"},{default:o(()=>[e(c,{cols:"12",md:"4"},{default:o(()=>[e(y,{modelValue:l.value.search,"onUpdate:modelValue":n[0]||(n[0]=k=>l.value.search=k),label:"Buscar",clearable:"",onInput:g(t)},null,8,["modelValue","onInput"])]),_:1}),e(c,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:o(()=>[e(s,{class:"h-md-auto me-2",disabled:u.value},{default:o(()=>[n[1]||(n[1]=f(" nuevo ")),e(g(B),{onOnSuccess:i})]),_:1},8,["disabled"]),H(e(s,{class:"h-md-auto",density:"comfortable",icon:"mdi-reload",onClick:b,loading:r.value},null,8,["loading"]),[[V,"Recargar registros"]])]),_:1})]),_:1})]),_:1}),e(g(J),{options:l.value,loading:r.value,items:d.value,total:p.value,onOnUpdateTable:i},null,8,["options","loading","items","total"])]),_:1},8,["disabled"])}}});export{Z as default};
