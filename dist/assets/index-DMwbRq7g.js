import{_ as N,a as R,b as I}from"./office.services-BjsHaSo4.js";import{d as T,e as c,r as o,o as D,c as O,w as t,a as e,u as v,g as y,f as j,t as q,l as G,n as H}from"./index-5KJAA8ng.js";import{r as F}from"./ruleUtils-DaB-ACZt.js";import{_ as L}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-BNt6PR-E.js";const S={name:[F],description:[]},M=()=>({id:null,name:"",description:null,status:!0}),B=T({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(w,{emit:u}){const r=u,i=w,a=c(!1),d=c(!1),s=c({...M(),...i.formState}),_=async()=>{a.value=!0,await N(s.value)&&(r("onSuccess"),d.value=!1),a.value=!1};return(p,n)=>{const f=o("v-text-field"),l=o("v-col"),b=o("v-textarea"),V=o("v-switch"),x=o("v-row"),U=o("v-card-item"),g=o("v-btn"),k=o("v-spacer"),C=o("v-card-actions"),P=o("v-card"),$=o("v-form"),E=o("v-dialog");return D(),O(E,{"max-width":"700",modelValue:d.value,"onUpdate:modelValue":n[4]||(n[4]=m=>d.value=m),activator:"parent"},{default:t(()=>[e($,{ref:"formRef",onSubmit:j(_,["prevent"])},{default:t(()=>[e(P,{title:s.value.id?"Editar Registro":"Nuevo Registro"},{default:t(()=>[e(U,{class:"border-t border-b"},{default:t(()=>[e(x,null,{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(f,{modelValue:s.value.name,"onUpdate:modelValue":n[0]||(n[0]=m=>s.value.name=m),label:"Nombre",rules:v(S).name},null,8,["modelValue","rules"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(b,{modelValue:s.value.description,"onUpdate:modelValue":n[1]||(n[1]=m=>s.value.description=m),label:"Descripción",rules:v(S).description,rows:"2"},null,8,["modelValue","rules"])]),_:1}),e(l,{cols:"12"},{default:t(()=>[e(V,{label:s.value.status?"Habilitado":"Deshabilitado",modelValue:s.value.status,"onUpdate:modelValue":n[2]||(n[2]=m=>s.value.status=m),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(g,{type:"button",variant:"text",color:"secondary",onClick:n[3]||(n[3]=m=>d.value=!1)},{default:t(()=>n[5]||(n[5]=[y(" Cancelar ")])),_:1}),e(k),e(g,{text:"Guardar",color:"primary",type:"submit",loading:a.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),z=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Nombre",key:"name",value:"name"},{title:"Descripción",key:"description",value:"description"},{title:"Estado",key:"status",value:"status"}],A=T({__name:"DataTable",props:{options:{},items:{},loading:{type:Boolean},total:{}},emits:["onUpdateTable"],setup(w,{emit:u}){const r=u;return(i,a)=>{const d=o("v-icon"),s=o("v-list-item"),_=o("v-list"),p=o("v-menu"),n=o("v-btn"),f=o("v-data-table-server");return D(),O(f,{"items-per-page":i.options.itemsPerPage,"onUpdate:itemsPerPage":[a[1]||(a[1]=l=>i.options.itemsPerPage=l),a[4]||(a[4]=l=>r("onUpdateTable"))],"sort-by":i.options.sortBy,"onUpdate:sortBy":[a[2]||(a[2]=l=>i.options.sortBy=l),a[5]||(a[5]=l=>r("onUpdateTable"))],page:i.options.page,"onUpdate:page":[a[3]||(a[3]=l=>i.options.page=l),a[6]||(a[6]=l=>r("onUpdateTable"))],headers:v(z),items:i.items,"items-length":i.total,loading:i.loading,"item-value":"id","multi-sort":""},{"item.actions":t(({item:l})=>[e(n,{icon:"",density:"compact",variant:"text"},{default:t(()=>[e(d,null,{default:t(()=>a[7]||(a[7]=[y("mdi-dots-vertical")])),_:1}),e(p,{activator:"parent"},{default:t(()=>[e(_,{density:"compact"},{default:t(()=>[e(s,{key:"edit",value:"edit",title:"Editar","append-icon":"mdi-pencil"},{default:t(()=>[e(v(B),{formState:l,onOnSuccess:a[0]||(a[0]=b=>r("onUpdateTable"))},null,8,["formState"])]),_:2},1024),e(s,{key:"delete",value:"delete",title:"Eliminar",class:"text-red","append-icon":"mdi-delete"},{default:t(()=>[e(L,{title:"Eliminar",message:"¿Está seguro de eliminar este registro?",onOnConfirm:async()=>{await v(R)(l.id)&&r("onUpdateTable")}},null,8,["onOnConfirm"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.status":t(({item:l})=>[e(n,{color:l.status?"blue":"error","text-color":"white",density:"compact",variant:"tonal"},{default:t(()=>[y(q(l.status?"Habilitado":"Deshabilitado"),1)]),_:2},1032,["color"])]),_:1},8,["items-per-page","sort-by","page","headers","items","items-length","loading"])}}}),X=T({__name:"index",setup(w){const u=c(!1),r=c(!1),i=c([]),a=c(0),d=c({itemsPerPage:10,sortBy:[],page:1,search:"",filters:{}}),s=async()=>{r.value=!0;const p=await I(d.value);i.value=p.data,a.value=p.total,r.value=!1},_=async()=>{u.value=!0,await s(),u.value=!1};return _(),(p,n)=>{const f=o("v-text-field"),l=o("v-col"),b=o("v-btn"),V=o("v-row"),x=o("v-card-item"),U=o("v-card"),g=G("tooltip");return D(),O(U,{title:"Oficinas",subtitle:"Gestión de oficinas",disabled:u.value},{default:t(()=>[e(x,{class:"border-t border-b"},{default:t(()=>[e(V,{class:"d-flex justify-space-between"},{default:t(()=>[e(l,{cols:"12",md:"4"},{default:t(()=>[e(f,{modelValue:d.value.search,"onUpdate:modelValue":n[0]||(n[0]=k=>d.value.search=k),label:"Buscar",clearable:"",onInput:s},null,8,["modelValue"])]),_:1}),e(l,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:t(()=>[e(b,{class:"h-md-auto me-2",disabled:u.value},{default:t(()=>[n[1]||(n[1]=y(" nuevo ")),e(v(B),{onOnSuccess:s})]),_:1},8,["disabled"]),H(e(b,{class:"h-md-auto",density:"comfortable",icon:"mdi-reload",onClick:_,loading:r.value},null,8,["loading"]),[[g,"Recargar registros"]])]),_:1})]),_:1})]),_:1}),e(v(A),{options:d.value,loading:r.value,items:i.value,total:a.value,onOnUpdateTable:s},null,8,["options","loading","items","total"])]),_:1},8,["disabled"])}}});export{X as default};
